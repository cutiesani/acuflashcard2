<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í˜ˆìœ„ ì•”ê¸° í”Œë˜ì‹œì¹´ë“œ</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function AcupointFlashcards() {
            const osuhyeol = {
                'ì¡±ê¶ìŒê°„ê²½': { ì •: { name: 'ëŒ€ëˆ', en: 'LR 1' }, í˜•: { name: 'í–‰ê°„', en: 'LR 2' }, ìœ : { name: 'íƒœì¶©', en: 'LR 3' }, ê²½: { name: 'ì¤‘ë´‰', en: 'LR 4' }, í•©: { name: 'ê³¡ì²œ', en: 'LR 8' } },
                'ìˆ˜ì†ŒìŒì‹¬ê²½': { ì •: { name: 'ì†Œì¶©', en: 'HT 9' }, í˜•: { name: 'ì†Œë¶€', en: 'HT 8' }, ìœ : { name: 'ì‹ ë¬¸', en: 'HT 7' }, ê²½: { name: 'ì˜ë„', en: 'HT 4' }, í•©: { name: 'ì†Œí•´', en: 'HT 3' } },
                'ìˆ˜ê¶ìŒì‹¬í¬ê²½': { ì •: { name: 'ì¤‘ì¶©', en: 'PC 9' }, í˜•: { name: 'ë…¸ê¶', en: 'PC 8' }, ìœ : { name: 'ëŒ€ë¦‰', en: 'PC 7' }, ê²½: { name: 'ê°„ì‚¬', en: 'PC 5' }, í•©: { name: 'ê³¡íƒ', en: 'PC 3' } },
                'ì¡±íƒœìŒë¹„ê²½': { ì •: { name: 'ì€ë°±', en: 'SP 1' }, í˜•: { name: 'ëŒ€ë„', en: 'SP 2' }, ìœ : { name: 'íƒœë°±', en: 'SP 3' }, ê²½: { name: 'ìƒêµ¬', en: 'SP 5' }, í•©: { name: 'ìŒë¦‰ì²œ', en: 'SP 9' } },
                'ìˆ˜íƒœìŒíê²½': { ì •: { name: 'ì†Œìƒ', en: 'LU 11' }, í˜•: { name: 'ì–´ì œ', en: 'LU 10' }, ìœ : { name: 'íƒœì—°', en: 'LU 9' }, ê²½: { name: 'ê²½ê±°', en: 'LU 8' }, í•©: { name: 'ì²™íƒ', en: 'LU 5' } },
                'ì¡±ì†ŒìŒì‹ ê²½': { ì •: { name: 'ìš©ì²œ', en: 'KI 1' }, í˜•: { name: 'ì—°ê³¡', en: 'KI 2' }, ìœ : { name: 'íƒœê³„', en: 'KI 3' }, ê²½: { name: 'ë³µë¥˜', en: 'KI 7' }, í•©: { name: 'ìŒê³¡', en: 'KI 10' } },
                'ì¡±ì†Œì–‘ë‹´ê²½': { ì •: { name: 'ì¡±ê·œìŒ', en: 'GB 44' }, í˜•: { name: 'í˜‘ê³„', en: 'GB 43' }, ìœ : { name: 'ì¡±ì„ì', en: 'GB 41' }, ê²½: { name: 'ì–‘ë³´', en: 'GB 38' }, í•©: { name: 'ì–‘ë¦‰ì²œ', en: 'GB 34' } },
                'ìˆ˜íƒœì–‘ì†Œì¥ê²½': { ì •: { name: 'ì†Œíƒ', en: 'SI 1' }, í˜•: { name: 'ì „ê³¡', en: 'SI 2' }, ìœ : { name: 'í›„ê³„', en: 'SI 3' }, ê²½: { name: 'ì–‘ê³¡', en: 'SI 5' }, í•©: { name: 'ì†Œí•´', en: 'SI 8' } },
                'ìˆ˜ì†Œì–‘ì‚¼ì´ˆê²½': { ì •: { name: 'ê´€ì¶©', en: 'TE 1' }, í˜•: { name: 'ì•¡ë¬¸', en: 'TE 2' }, ìœ : { name: 'ì¤‘ì €', en: 'TE 3' }, ê²½: { name: 'ì§€êµ¬', en: 'TE 6' }, í•©: { name: 'ì²œì •', en: 'TE 10' } },
                'ì¡±ì–‘ëª…ìœ„ê²½': { ì •: { name: 'ì—¬íƒœ', en: 'ST 45' }, í˜•: { name: 'ë‚´ì •', en: 'ST 44' }, ìœ : { name: 'í•¨ê³¡', en: 'ST 43' }, ê²½: { name: 'í•´ê³„', en: 'ST 41' }, í•©: { name: 'ì¡±ì‚¼ë¦¬', en: 'ST 36' } },
                'ìˆ˜ì–‘ëª…ëŒ€ì¥ê²½': { ì •: { name: 'ìƒì–‘', en: 'LI 1' }, í˜•: { name: 'ì´ê°„', en: 'LI 2' }, ìœ : { name: 'ì‚¼ê°„', en: 'LI 3' }, ê²½: { name: 'ì–‘ê³„', en: 'LI 5' }, í•©: { name: 'ê³¡ì§€', en: 'LI 11' } },
                'ì¡±íƒœì–‘ë°©ê´‘ê²½': { ì •: { name: 'ì§€ìŒ', en: 'BL 67' }, í˜•: { name: 'ì¡±í†µê³¡', en: 'BL 66' }, ìœ : { name: 'ì†ê³¨', en: 'BL 65' }, ê²½: { name: 'ê³¤ë¥œ', en: 'BL 60' }, í•©: { name: 'ìœ„ì¤‘', en: 'BL 40' } }
            };

            const teukjeonghyeol = {
                'ì¡±ê¶ìŒê°„ê²½': { ì›: { name: 'íƒœì¶©', en: 'LR 3' }, ë½: { name: 'ì—¬êµ¬', en: 'LR 5' }, ê·¹: { name: 'ì¤‘ë„', en: 'LR 6' }, ë°°ìˆ˜: { name: 'ê°„ìˆ˜', en: 'BL 18' }, ëª¨: { name: 'ê¸°ë¬¸', en: 'LR 14' } },
                'ìˆ˜ì†ŒìŒì‹¬ê²½': { ì›: { name: 'ì‹ ë¬¸', en: 'HT 7' }, ë½: { name: 'í†µë¦¬', en: 'HT 5' }, ê·¹: { name: 'ìŒê·¹', en: 'HT 6' }, ë°°ìˆ˜: { name: 'ì‹¬ìˆ˜', en: 'BL 15' }, ëª¨: { name: 'ê±°ê¶', en: 'CV 14' } },
                'ìˆ˜ê¶ìŒì‹¬í¬ê²½': { ì›: { name: 'ëŒ€ë¦‰', en: 'PC 7' }, ë½: { name: 'ë‚´ê´€', en: 'PC 6' }, ê·¹: { name: 'ê·¹ë¬¸', en: 'PC 4' }, ë°°ìˆ˜: { name: 'ê¶ìŒìˆ˜', en: 'BL 14' }, ëª¨: { name: 'ë‹¨ì¤‘', en: 'CV 17' } },
                'ì¡±íƒœìŒë¹„ê²½': { ì›: { name: 'íƒœë°±', en: 'SP 3' }, ë½: { name: 'ê³µì†', en: 'SP 4' }, ê·¹: { name: 'ì§€ê¸°', en: 'SP 8' }, ë°°ìˆ˜: { name: 'ë¹„ìˆ˜', en: 'BL 20' }, ëª¨: { name: 'ì¥ë¬¸', en: 'LR 13' } },
                'ìˆ˜íƒœìŒíê²½': { ì›: { name: 'íƒœì—°', en: 'LU 9' }, ë½: { name: 'ì—´ê²°', en: 'LU 7' }, ê·¹: { name: 'ê³µìµœ', en: 'LU 6' }, ë°°ìˆ˜: { name: 'íìˆ˜', en: 'BL 13' }, ëª¨: { name: 'ì¤‘ë¶€', en: 'LU 1' } },
                'ì¡±ì†ŒìŒì‹ ê²½': { ì›: { name: 'íƒœê³„', en: 'KI 3' }, ë½: { name: 'ëŒ€ì¢…', en: 'KI 4' }, ê·¹: { name: 'ìˆ˜ì²œ', en: 'KI 5' }, ë°°ìˆ˜: { name: 'ì‹ ìˆ˜', en: 'BL 23' }, ëª¨: { name: 'ê²½ë¬¸', en: 'GB 25' } },
                'ì¡±ì†Œì–‘ë‹´ê²½': { ì›: { name: 'êµ¬í—ˆ', en: 'GB 40' }, ë½: { name: 'ê´‘ëª…', en: 'GB 37' }, ê·¹: { name: 'ì™¸êµ¬', en: 'GB 36' }, ë°°ìˆ˜: { name: 'ë‹´ìˆ˜', en: 'BL 19' }, ëª¨: { name: 'ì¼ì›”', en: 'GB 24' }, í•˜í•©: { name: 'ì–‘ë¦‰ì²œ', en: 'GB 34' } },
                'ìˆ˜íƒœì–‘ì†Œì¥ê²½': { ì›: { name: 'ì™„ê³¨', en: 'SI 4' }, ë½: { name: 'ì§€ì •', en: 'SI 7' }, ê·¹: { name: 'ì–‘ë¡œ', en: 'SI 6' }, ë°°ìˆ˜: { name: 'ì†Œì¥ìˆ˜', en: 'BL 27' }, ëª¨: { name: 'ê´€ì›', en: 'CV 4' }, í•˜í•©: { name: 'í•˜ê±°í—ˆ', en: 'ST 39' } },
                'ìˆ˜ì†Œì–‘ì‚¼ì´ˆê²½': { ì›: { name: 'ì–‘ì§€', en: 'TE 4' }, ë½: { name: 'ì™¸ê´€', en: 'TE 5' }, ê·¹: { name: 'íšŒì¢…', en: 'TE 7' }, ë°°ìˆ˜: { name: 'ì‚¼ì´ˆìˆ˜', en: 'BL 22' }, ëª¨: { name: 'ì„ë¬¸', en: 'CV 5' }, í•˜í•©: { name: 'ìœ„ì–‘', en: 'BL 39' } },
                'ì¡±ì–‘ëª…ìœ„ê²½': { ì›: { name: 'ì¶©ì–‘', en: 'ST 42' }, ë½: { name: 'í’ë¥­', en: 'ST 40' }, ê·¹: { name: 'ì–‘êµ¬', en: 'ST 34' }, ë°°ìˆ˜: { name: 'ìœ„ìˆ˜', en: 'BL 21' }, ëª¨: { name: 'ì¤‘ì™„', en: 'CV 12' }, í•˜í•©: { name: 'ì¡±ì‚¼ë¦¬', en: 'ST 36' } },
                'ìˆ˜ì–‘ëª…ëŒ€ì¥ê²½': { ì›: { name: 'í•©ê³¡', en: 'LI 4' }, ë½: { name: 'í¸ë ¥', en: 'LI 6' }, ê·¹: { name: 'ì˜¨ë¥˜', en: 'LI 7' }, ë°°ìˆ˜: { name: 'ëŒ€ì¥ìˆ˜', en: 'BL 25' }, ëª¨: { name: 'ì²œì¶”', en: 'ST 25' }, í•˜í•©: { name: 'ìƒê±°í—ˆ', en: 'ST 37' } },
                'ì¡±íƒœì–‘ë°©ê´‘ê²½': { ì›: { name: 'ê²½ê³¨', en: 'BL 64' }, ë½: { name: 'ë¹„ì–‘', en: 'BL 58' }, ê·¹: { name: 'ê¸ˆë¬¸', en: 'BL 63' }, ë°°ìˆ˜: { name: 'ë°©ê´‘ìˆ˜', en: 'BL 28' }, ëª¨: { name: 'ì¤‘ê·¹', en: 'CV 3' }, í•˜í•©: { name: 'ìœ„ì¤‘', en: 'BL 40' } }
            };

            const ohyeong = {
                'ì¡±ê¶ìŒê°„ê²½': { ëª©: { name: 'ëŒ€ëˆ', en: 'LR 1' }, í™”: { name: 'í–‰ê°„', en: 'LR 2' }, í† : { name: 'íƒœì¶©', en: 'LR 3' }, ê¸ˆ: { name: 'ì¤‘ë´‰', en: 'LR 4' }, ìˆ˜: { name: 'ê³¡ì²œ', en: 'LR 8' } },
                'ìˆ˜ì†ŒìŒì‹¬ê²½': { ëª©: { name: 'ì†Œì¶©', en: 'HT 9' }, í™”: { name: 'ì†Œë¶€', en: 'HT 8' }, í† : { name: 'ì‹ ë¬¸', en: 'HT 7' }, ê¸ˆ: { name: 'ì˜ë„', en: 'HT 4' }, ìˆ˜: { name: 'ì†Œí•´', en: 'HT 3' } },
                'ìˆ˜ê¶ìŒì‹¬í¬ê²½': { ëª©: { name: 'ì¤‘ì¶©', en: 'PC 9' }, í™”: { name: 'ë…¸ê¶', en: 'PC 8' }, í† : { name: 'ëŒ€ë¦‰', en: 'PC 7' }, ê¸ˆ: { name: 'ê°„ì‚¬', en: 'PC 5' }, ìˆ˜: { name: 'ê³¡íƒ', en: 'PC 3' } },
                'ì¡±íƒœìŒë¹„ê²½': { ëª©: { name: 'ì€ë°±', en: 'SP 1' }, í™”: { name: 'ëŒ€ë„', en: 'SP 2' }, í† : { name: 'íƒœë°±', en: 'SP 3' }, ê¸ˆ: { name: 'ìƒêµ¬', en: 'SP 5' }, ìˆ˜: { name: 'ìŒë¦‰ì²œ', en: 'SP 9' } },
                'ìˆ˜íƒœìŒíê²½': { ëª©: { name: 'ì†Œìƒ', en: 'LU 11' }, í™”: { name: 'ì–´ì œ', en: 'LU 10' }, í† : { name: 'íƒœì—°', en: 'LU 9' }, ê¸ˆ: { name: 'ê²½ê±°', en: 'LU 8' }, ìˆ˜: { name: 'ì²™íƒ', en: 'LU 5' } },
                'ì¡±ì†ŒìŒì‹ ê²½': { ëª©: { name: 'ìš©ì²œ', en: 'KI 1' }, í™”: { name: 'ì—°ê³¡', en: 'KI 2' }, í† : { name: 'íƒœê³„', en: 'KI 3' }, ê¸ˆ: { name: 'ë³µë¥˜', en: 'KI 7' }, ìˆ˜: { name: 'ìŒê³¡', en: 'KI 10' } },
                'ì¡±ì†Œì–‘ë‹´ê²½': { ê¸ˆ: { name: 'ì¡±ê·œìŒ', en: 'GB 44' }, ìˆ˜: { name: 'í˜‘ê³„', en: 'GB 43' }, ëª©: { name: 'ì¡±ì„ì', en: 'GB 41' }, í™”: { name: 'ì–‘ë³´', en: 'GB 38' }, í† : { name: 'ì–‘ë¦‰ì²œ', en: 'GB 34' } },
                'ìˆ˜íƒœì–‘ì†Œì¥ê²½': { ê¸ˆ: { name: 'ì†Œíƒ', en: 'SI 1' }, ìˆ˜: { name: 'ì „ê³¡', en: 'SI 2' }, ëª©: { name: 'í›„ê³„', en: 'SI 3' }, í™”: { name: 'ì–‘ê³¡', en: 'SI 5' }, í† : { name: 'ì†Œí•´', en: 'SI 8' } },
                'ìˆ˜ì†Œì–‘ì‚¼ì´ˆê²½': { ê¸ˆ: { name: 'ê´€ì¶©', en: 'TE 1' }, ìˆ˜: { name: 'ì•¡ë¬¸', en: 'TE 2' }, ëª©: { name: 'ì¤‘ì €', en: 'TE 3' }, í™”: { name: 'ì§€êµ¬', en: 'TE 6' }, í† : { name: 'ì²œì •', en: 'TE 10' } },
                'ì¡±ì–‘ëª…ìœ„ê²½': { ê¸ˆ: { name: 'ì—¬íƒœ', en: 'ST 45' }, ìˆ˜: { name: 'ë‚´ì •', en: 'ST 44' }, ëª©: { name: 'í•¨ê³¡', en: 'ST 43' }, í™”: { name: 'í•´ê³„', en: 'ST 41' }, í† : { name: 'ì¡±ì‚¼ë¦¬', en: 'ST 36' } },
                'ìˆ˜ì–‘ëª…ëŒ€ì¥ê²½': { ê¸ˆ: { name: 'ìƒì–‘', en: 'LI 1' }, ìˆ˜: { name: 'ì´ê°„', en: 'LI 2' }, ëª©: { name: 'ì‚¼ê°„', en: 'LI 3' }, í™”: { name: 'ì–‘ê³„', en: 'LI 5' }, í† : { name: 'ê³¡ì§€', en: 'LI 11' } },
                'ì¡±íƒœì–‘ë°©ê´‘ê²½': { ê¸ˆ: { name: 'ì§€ìŒ', en: 'BL 67' }, ìˆ˜: { name: 'ì¡±í†µê³¡', en: 'BL 66' }, ëª©: { name: 'ì†ê³¨', en: 'BL 65' }, í™”: { name: 'ê³¤ë¥œ', en: 'BL 60' }, í† : { name: 'ìœ„ì¤‘', en: 'BL 40' } }
            };

            // ì‚¬ì´í˜ˆ (å››ç¸½ç©´)
            const sachonghyeol = {
                'ë³µë¶€': { name: 'ì¡±ì‚¼ë¦¬', en: 'ST 36', desc: 'Abdomen' },
                'ìš”ë°°': { name: 'ìœ„ì¤‘', en: 'BL 40', desc: 'Back (upper and lower)' },
                'ë‘í•­': { name: 'ì—´ê²°', en: 'LU 7', desc: 'Head and back of neck' },
                'ë©´êµ¬': { name: 'í•©ê³¡', en: 'LI 4', desc: 'Face and mouth' }
            };

            // íŒ”ë§¥êµíšŒí˜ˆ (å…«è„ˆäº¤æœƒç©´)
            const palmaekyohoe = {
                'ê³µì†': { name: 'ê³µì†', en: 'SP 4', connects: 'ì¶©ë§¥', connectsEn: 'Chong Mai' },
                'ë‚´ê´€': { name: 'ë‚´ê´€', en: 'PC 6', connects: 'ìŒìœ ë§¥', connectsEn: 'Yin Wei Mai' },
                'ì¡±ì„ì': { name: 'ì¡±ì„ì', en: 'GB 41', connects: 'ëŒ€ë§¥', connectsEn: 'Dai Mai' },
                'ì™¸ê´€': { name: 'ì™¸ê´€', en: 'TE 5', connects: 'ì–‘ìœ ë§¥', connectsEn: 'Yang Wei Mai' },
                'í›„ê³„': { name: 'í›„ê³„', en: 'SI 3', connects: 'ë…ë§¥', connectsEn: 'Du Mai' },
                'ì‹ ë§¥': { name: 'ì‹ ë§¥', en: 'BL 62', connects: 'ì–‘êµë§¥', connectsEn: 'Yang Qiao Mai' },
                'ì—´ê²°': { name: 'ì—´ê²°', en: 'LU 7', connects: 'ì„ë§¥', connectsEn: 'Ren Mai' },
                'ì¡°í•´': { name: 'ì¡°í•´', en: 'KI 6', connects: 'ìŒêµë§¥', connectsEn: 'Yin Qiao Mai' }
            };

            // íŒ”íšŒí˜ˆ (å…«æœƒç©´)
            const palhoehyeol = {
                'ì¥íšŒ': { name: 'ì¥ë¬¸', en: 'LR 13', category: 'è‡Ÿ', categoryEn: 'Zang (Organs)' },
                'ë¶€íšŒ': { name: 'ì¤‘ì™„', en: 'CV 12', category: 'è…‘', categoryEn: 'Fu (Bowels)' },
                'ê¸°íšŒ': { name: 'ë‹¨ì¤‘', en: 'CV 17', category: 'æ°£', categoryEn: 'Qi' },
                'í˜ˆíšŒ': { name: 'ê²©ìˆ˜', en: 'BL 17', category: 'è¡€', categoryEn: 'Blood' },
                'ê·¼íšŒ': { name: 'ì–‘ë¦‰ì²œ', en: 'GB 34', category: 'ç­‹', categoryEn: 'Tendons' },
                'ë§¥íšŒ': { name: 'íƒœì—°', en: 'LU 9', category: 'è„ˆ', categoryEn: 'Vessels' },
                'ê³¨íšŒ': { name: 'ëŒ€ì €', en: 'BL 11', category: 'éª¨', categoryEn: 'Bones' },
                'ìˆ˜íšŒ': { name: 'í˜„ì¢…', en: 'GB 39', category: 'é«“', categoryEn: 'Marrow' }
            };

            // ê¸°ê²½íŒ”ë§¥ ê·¹í˜ˆ
            const gigyeonggeuk = {
                'ì–‘êµë§¥': { name: 'ë¶€ì–‘', en: 'BL 59' },
                'ìŒêµë§¥': { name: 'êµì‹ ', en: 'KI 8' },
                'ì–‘ìœ ë§¥': { name: 'ì–‘êµ', en: 'GB 35' },
                'ìŒìœ ë§¥': { name: 'ì¶•ë¹ˆ', en: 'KI 9' }
            };

            const [mode, setMode] = useState('all');
            const [studyMode, setStudyMode] = useState('random');
            const [currentCard, setCurrentCard] = useState(null);
            const [showAnswer, setShowAnswer] = useState(false);
            const [stats, setStats] = useState({ correct: 0, incorrect: 0 });
            const [wrongAnswers, setWrongAnswers] = useState([]);
            const [allQuestions, setAllQuestions] = useState([]);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [showWrongList, setShowWrongList] = useState(false);
            const [questionHistory, setQuestionHistory] = useState([]);
            const [historyIndex, setHistoryIndex] = useState(-1);

            const generateAllQuestions = () => {
                const questions = [];
                
                const meridianEnMap = {
                    'ì¡±ê¶ìŒê°„ê²½': 'Liver',
                    'ìˆ˜ì†ŒìŒì‹¬ê²½': 'Heart',
                    'ìˆ˜ê¶ìŒì‹¬í¬ê²½': 'Pericardium',
                    'ì¡±íƒœìŒë¹„ê²½': 'Spleen',
                    'ìˆ˜íƒœìŒíê²½': 'Lung',
                    'ì¡±ì†ŒìŒì‹ ê²½': 'Kidney',
                    'ì¡±ì†Œì–‘ë‹´ê²½': 'Gallbladder',
                    'ìˆ˜íƒœì–‘ì†Œì¥ê²½': 'Small Intestine',
                    'ìˆ˜ì†Œì–‘ì‚¼ì´ˆê²½': 'Triple Energizer',
                    'ì¡±ì–‘ëª…ìœ„ê²½': 'Stomach',
                    'ìˆ˜ì–‘ëª…ëŒ€ì¥ê²½': 'Large Intestine',
                    'ì¡±íƒœì–‘ë°©ê´‘ê²½': 'Bladder'
                };
                
                // ì˜¤ìˆ˜í˜ˆ
                Object.keys(osuhyeol).forEach(meridian => {
                    ['ì •', 'í˜•', 'ìœ ', 'ê²½', 'í•©'].forEach(pointType => {
                        const typeMap = { 
                            ì •: { kr: 'ì •í˜ˆ', en: 'Jing-Well' }, 
                            í˜•: { kr: 'í˜•í˜ˆ', en: 'Ying-Spring' }, 
                            ìœ : { kr: 'ìœ í˜ˆ', en: 'Shu-Stream' }, 
                            ê²½: { kr: 'ê²½í˜ˆ', en: 'Jing-River' }, 
                            í•©: { kr: 'í•©í˜ˆ', en: 'He-Sea' }
                        };
                        const pointData = osuhyeol[meridian][pointType];
                        questions.push({
                            category: 'ì˜¤ìˆ˜í˜ˆ',
                            meridian,
                            meridianEn: meridianEnMap[meridian],
                            pointType,
                            pointTypeKorean: typeMap[pointType].kr,
                            pointTypeEnglish: `${typeMap[pointType].en} of ${meridianEnMap[meridian]} meridian`,
                            answer: pointData.name,
                            answerEn: pointData.en
                        });
                    });
                });

                // íŠ¹ì •í˜ˆ
                Object.keys(teukjeonghyeol).forEach(meridian => {
                    Object.keys(teukjeonghyeol[meridian]).forEach(pointType => {
                        const typeMap = { 
                            ì›: { kr: 'ì›í˜ˆ', en: 'Yuan-Source' }, 
                            ë½: { kr: 'ë½í˜ˆ', en: 'Luo-Connecting' }, 
                            ê·¹: { kr: 'ê·¹í˜ˆ', en: 'Xi-Cleft' }, 
                            ë°°ìˆ˜: { kr: 'ë°°ìˆ˜í˜ˆ', en: 'Back-Shu' }, 
                            ëª¨: { kr: 'ëª¨í˜ˆ', en: 'Front-Mu' }, 
                            í•˜í•©: { kr: 'í•˜í•©í˜ˆ', en: 'Lower He-Sea' }
                        };
                        const pointData = teukjeonghyeol[meridian][pointType];
                        questions.push({
                            category: 'íŠ¹ì •í˜ˆ',
                            meridian,
                            meridianEn: meridianEnMap[meridian],
                            pointType,
                            pointTypeKorean: typeMap[pointType].kr,
                            pointTypeEnglish: `${typeMap[pointType].en} of ${meridianEnMap[meridian]} meridian`,
                            answer: pointData.name,
                            answerEn: pointData.en
                        });
                    });
                });

                // ì˜¤í–‰í˜ˆ
                Object.keys(ohyeong).forEach(meridian => {
                    ['ëª©', 'í™”', 'í† ', 'ê¸ˆ', 'ìˆ˜'].forEach(element => {
                        if (ohyeong[meridian][element]) {
                            const typeMap = { 
                                ëª©: { kr: 'ëª©í˜ˆ', en: 'Wood' }, 
                                í™”: { kr: 'í™”í˜ˆ', en: 'Fire' }, 
                                í† : { kr: 'í† í˜ˆ', en: 'Earth' }, 
                                ê¸ˆ: { kr: 'ê¸ˆí˜ˆ', en: 'Metal' }, 
                                ìˆ˜: { kr: 'ìˆ˜í˜ˆ', en: 'Water' }
                            };
                            const pointData = ohyeong[meridian][element];
                            questions.push({
                                category: 'ì˜¤í–‰í˜ˆ',
                                meridian,
                                meridianEn: meridianEnMap[meridian],
                                pointType: element,
                                pointTypeKorean: typeMap[element].kr,
                                pointTypeEnglish: `${typeMap[element].en} point of ${meridianEnMap[meridian]} meridian`,
                                answer: pointData.name,
                                answerEn: pointData.en
                            });
                        }
                    });
                });

                // ì‚¬ì´í˜ˆ
                Object.keys(sachonghyeol).forEach(area => {
                    const pointData = sachonghyeol[area];
                    questions.push({
                        category: 'ì‚¬ì´í˜ˆ',
                        meridian: area,
                        meridianEn: pointData.desc,
                        pointType: area,
                        pointTypeKorean: `${area}ì˜ ì‚¬ì´í˜ˆ`,
                        pointTypeEnglish: `Command point for ${pointData.desc}`,
                        answer: pointData.name,
                        answerEn: pointData.en
                    });
                });

                // íŒ”ë§¥êµíšŒí˜ˆ
                Object.keys(palmaekyohoe).forEach(point => {
                    const pointData = palmaekyohoe[point];
                    questions.push({
                        category: 'íŒ”ë§¥êµíšŒí˜ˆ',
                        meridian: pointData.connects,
                        meridianEn: pointData.connectsEn,
                        pointType: point,
                        pointTypeKorean: `${pointData.connects}ì˜ êµíšŒí˜ˆ`,
                        pointTypeEnglish: `Confluent point of ${pointData.connectsEn}`,
                        answer: pointData.name,
                        answerEn: pointData.en
                    });
                });

                // íŒ”íšŒí˜ˆ
                Object.keys(palhoehyeol).forEach(type => {
                    const pointData = palhoehyeol[type];
                    questions.push({
                        category: 'íŒ”íšŒí˜ˆ',
                        meridian: pointData.category,
                        meridianEn: pointData.categoryEn,
                        pointType: type,
                        pointTypeKorean: type,
                        pointTypeEnglish: `Influential point of ${pointData.categoryEn}`,
                        answer: pointData.name,
                        answerEn: pointData.en
                    });
                });

                // ê¸°ê²½íŒ”ë§¥ ê·¹í˜ˆ
                Object.keys(gigyeonggeuk).forEach(vessel => {
                    const pointData = gigyeonggeuk[vessel];
                    questions.push({
                        category: 'ê¸°ê²½íŒ”ë§¥ ê·¹í˜ˆ',
                        meridian: vessel,
                        meridianEn: vessel,
                        pointType: 'ê·¹í˜ˆ',
                        pointTypeKorean: `${vessel}ì˜ ê·¹í˜ˆ`,
                        pointTypeEnglish: `Xi-Cleft point of ${vessel}`,
                        answer: pointData.name,
                        answerEn: pointData.en
                    });
                });

                return questions;
            };

            useEffect(() => {
                const questions = generateAllQuestions();
                const shuffled = [...questions].sort(() => Math.random() - 0.5);
                setAllQuestions(shuffled);
            }, []);

            const generateQuestion = () => {
                let questionsPool = mode === 'wrong' ? wrongAnswers : allQuestions;
                
                if (questionsPool.length === 0) {
                    if (mode === 'wrong') {
                        alert('í‹€ë¦° ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤!');
                        setMode('all');
                        questionsPool = allQuestions;
                    } else {
                        return;
                    }
                }

                let newCard;
                if (studyMode === 'random') {
                    const randomIndex = Math.floor(Math.random() * questionsPool.length);
                    newCard = questionsPool[randomIndex];
                } else {
                    newCard = questionsPool[currentIndex % questionsPool.length];
                }
                
                setCurrentCard(newCard);
                setQuestionHistory(prev => {
                    const newHistory = [...prev, newCard];
                    setHistoryIndex(newHistory.length - 1);
                    return newHistory;
                });
                setShowAnswer(false);
            };

            const navigateHistory = (direction) => {
                if (direction === 'prev' && historyIndex > 0) {
                    const newIndex = historyIndex - 1;
                    setHistoryIndex(newIndex);
                    setCurrentCard(questionHistory[newIndex]);
                    setShowAnswer(false);
                } else if (direction === 'next' && historyIndex < questionHistory.length - 1) {
                    const newIndex = historyIndex + 1;
                    setHistoryIndex(newIndex);
                    setCurrentCard(questionHistory[newIndex]);
                    setShowAnswer(false);
                }
            };

            useEffect(() => {
                if (allQuestions.length > 0) {
                    generateQuestion();
                }
            }, [mode, studyMode, allQuestions]);

            useEffect(() => {
                const handleKeyPress = (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        if (!showAnswer) {
                            setShowAnswer(true);
                        }
                    }
                    
                    if (showAnswer) {
                        if (e.key === '1') {
                            e.preventDefault();
                            handleCorrect();
                        }
                        if (e.key === '2') {
                            e.preventDefault();
                            handleIncorrect();
                        }
                    }
                    
                    if (e.key === 'ArrowLeft') {
                        e.preventDefault();
                        navigateHistory('prev');
                    }
                    
                    if (e.key === 'ArrowRight') {
                        e.preventDefault();
                        if (historyIndex < questionHistory.length - 1) {
                            navigateHistory('next');
                        } else {
                            nextQuestion();
                        }
                    }
                };

                window.addEventListener('keydown', handleKeyPress);
                return () => window.removeEventListener('keydown', handleKeyPress);
            }, [showAnswer, historyIndex, questionHistory]);

            const handleFlip = () => setShowAnswer(!showAnswer);
            
            const handleCorrect = () => {
                setStats(prev => ({ ...prev, correct: prev.correct + 1 }));
                if (currentCard) {
                    setWrongAnswers(prev => prev.filter(q => 
                        !(q.meridian === currentCard.meridian && 
                          q.pointType === currentCard.pointType && 
                          q.category === currentCard.category)
                    ));
                }
                nextQuestion();
            };
            
            const handleIncorrect = () => {
                setStats(prev => ({ ...prev, incorrect: prev.incorrect + 1 }));
                if (currentCard) {
                    const exists = wrongAnswers.some(q => 
                        q.meridian === currentCard.meridian && 
                        q.pointType === currentCard.pointType && 
                        q.category === currentCard.category
                    );
                    if (!exists) {
                        setWrongAnswers(prev => [...prev, currentCard]);
                    }
                }
                nextQuestion();
            };

            const nextQuestion = () => {
                if (studyMode === 'sequential') {
                    setCurrentIndex(prev => prev + 1);
                } else {
                    generateQuestion();
                }
            };

            const handleReset = () => {
                setStats({ correct: 0, incorrect: 0 });
                setWrongAnswers([]);
                setCurrentIndex(0);
                setMode('all');
                setQuestionHistory([]);
                setHistoryIndex(-1);
                generateQuestion();
            };

            const handleModeChange = (newMode) => {
                setMode(newMode);
                setCurrentIndex(0);
            };

            const handleStudyModeChange = (newStudyMode) => {
                setStudyMode(newStudyMode);
                setCurrentIndex(0);
                if (newStudyMode === 'random') {
                    const shuffled = [...allQuestions].sort(() => Math.random() - 0.5);
                    setAllQuestions(shuffled);
                }
            };

            if (!currentCard) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center">
                        <div className="text-2xl text-gray-600">ë¡œë”© ì¤‘...</div>
                    </div>
                );
            }

            const accuracy = stats.correct + stats.incorrect > 0 
                ? Math.round((stats.correct / (stats.correct + stats.incorrect)) * 100) 
                : 0;

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                    <div className="max-w-2xl mx-auto">
                        <div className="text-center mb-6">
                            <h1 className="text-3xl font-bold text-gray-800 mb-2">í˜ˆìœ„ ì•”ê¸° í”Œë˜ì‹œì¹´ë“œ</h1>
                            <p className="text-gray-600">ì˜¤ìˆ˜í˜ˆÂ·íŠ¹ì •í˜ˆÂ·ì˜¤í–‰í˜ˆÂ·ì‚¬ì´í˜ˆÂ·íŒ”ë§¥êµíšŒí˜ˆÂ·íŒ”íšŒí˜ˆÂ·ê¸°ê²½íŒ”ë§¥ ê·¹í˜ˆ (ì˜ë¬¸ í‘œê¸° í¬í•¨)</p>
                        </div>

                        <div className="bg-white rounded-lg p-4 mb-4 shadow">
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <p className="text-sm text-gray-600 mb-2 font-medium">ë¬¸ì œ ì„ íƒ</p>
                                    <div className="flex gap-2">
                                        <button
                                            onClick={() => handleModeChange('all')}
                                            className={`flex-1 px-4 py-2 rounded-lg font-medium transition-all ${
                                                mode === 'all' 
                                                    ? 'bg-indigo-600 text-white shadow' 
                                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                            }`}
                                        >
                                            ì „ì²´ ({allQuestions.length})
                                        </button>
                                        <button
                                            onClick={() => handleModeChange('wrong')}
                                            className={`flex-1 px-4 py-2 rounded-lg font-medium transition-all ${
                                                mode === 'wrong' 
                                                    ? 'bg-red-600 text-white shadow' 
                                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                            }`}
                                        >
                                            í‹€ë¦°ê²ƒ ({wrongAnswers.length})
                                        </button>
                                    </div>
                                </div>
                                <div>
                                    <p className="text-sm text-gray-600 mb-2 font-medium">ìˆœì„œ</p>
                                    <div className="flex gap-2">
                                        <button
                                            onClick={() => handleStudyModeChange('random')}
                                            className={`flex-1 px-4 py-2 rounded-lg font-medium transition-all ${
                                                studyMode === 'random' 
                                                    ? 'bg-indigo-600 text-white shadow' 
                                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                            }`}
                                        >
                                            ğŸ”€ ëœë¤
                                        </button>
                                        <button
                                            onClick={() => handleStudyModeChange('sequential')}
                                            className={`flex-1 px-4 py-2 rounded-lg font-medium transition-all ${
                                                studyMode === 'sequential' 
                                                    ? 'bg-indigo-600 text-white shadow' 
                                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                            }`}
                                        >
                                            ğŸ“‹ ìˆœì°¨
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="grid grid-cols-3 gap-4 mb-6">
                            <div className="bg-white rounded-lg p-4 text-center shadow">
                                <div className="text-2xl font-bold text-green-600">{stats.correct}</div>
                                <div className="text-sm text-gray-600">ì •ë‹µ</div>
                            </div>
                            <div className="bg-white rounded-lg p-4 text-center shadow">
                                <div className="text-2xl font-bold text-red-600">{stats.incorrect}</div>
                                <div className="text-sm text-gray-600">ì˜¤ë‹µ</div>
                            </div>
                            <div className="bg-white rounded-lg p-4 text-center shadow">
                                <div className="text-2xl font-bold text-indigo-600">{accuracy}%</div>
                                <div className="text-sm text-gray-600">ì •í™•ë„</div>
                            </div>
                        </div>

                        <div 
                            onClick={handleFlip}
                            className="bg-white rounded-2xl shadow-2xl p-8 mb-6 cursor-pointer transform transition-all hover:scale-105 min-h-[300px] flex flex-col justify-center items-center"
                        >
                            <div className="text-center w-full">
                                <div className="flex items-center justify-between mb-4 px-4">
                                    <div className="text-xs text-gray-400">
                                        {historyIndex >= 0 && `${historyIndex + 1}/${questionHistory.length}`}
                                    </div>
                                    <div className="text-sm text-indigo-600 font-medium">
                                        {currentCard.category}
                                    </div>
                                    <div className="text-xs text-gray-400 flex gap-1">
                                        {historyIndex > 0 && <span>â† ì´ì „</span>}
                                        {historyIndex < questionHistory.length - 1 && <span>ë‹¤ìŒ â†’</span>}
                                    </div>
                                </div>
                                
                                {!showAnswer ? (
                                    <>
                                        <div className="text-4xl font-bold text-gray-800 mb-4">
                                            {currentCard.meridian}ì˜
                                        </div>
                                        <div className="text-5xl font-bold text-indigo-600 mb-2">
                                            {currentCard.pointTypeKorean}ì€?
                                        </div>
                                        <div className="text-sm text-gray-500 mb-8">
                                            {currentCard.pointTypeEnglish}
                                        </div>
                                        <div className="mt-8 text-sm text-gray-500">
                                            <kbd className="px-2 py-1 bg-indigo-100 text-indigo-700 rounded font-mono text-xs">Enter</kbd> / <kbd className="px-2 py-1 bg-indigo-100 text-indigo-700 rounded font-mono text-xs">Space</kbd>
                                        </div>
                                    </>
                                ) : (
                                    <>
                                        <div className="text-2xl text-gray-600 mb-4">
                                            {currentCard.meridian}ì˜ {currentCard.pointTypeKorean}
                                        </div>
                                        <div className="text-6xl font-bold text-indigo-600 mb-2">
                                            {currentCard.answer}
                                        </div>
                                        <div className="text-2xl text-gray-500 mb-8">
                                            {currentCard.answerEn}
                                        </div>
                                        <div className="mt-8 text-sm text-gray-500">
                                            <kbd className="px-2 py-1 bg-green-100 text-green-700 rounded font-mono text-xs">1</kbd> ë§ìŒ â€¢ 
                                            <kbd className="px-2 py-1 bg-red-100 text-red-700 rounded font-mono text-xs">2</kbd> í‹€ë¦¼
                                        </div>
                                    </>
                                )}
                            </div>
                        </div>

                        {showAnswer && (
                            <div className="grid grid-cols-2 gap-4 mb-4">
                                <button
                                    onClick={handleIncorrect}
                                    className="bg-red-500 hover:bg-red-600 text-white font-medium py-4 rounded-lg shadow-lg transition-all flex items-center justify-center gap-2"
                                >
                                    âŒ í‹€ë ¸ì–´ìš”
                                </button>
                                <button
                                    onClick={handleCorrect}
                                    className="bg-green-500 hover:bg-green-600 text-white font-medium py-4 rounded-lg shadow-lg transition-all flex items-center justify-center gap-2"
                                >
                                    âœ… ë§ì•˜ì–´ìš”
                                </button>
                            </div>
                        )}

                        <div className="grid grid-cols-2 gap-4 mb-4">
                            <button
                                onClick={() => setShowWrongList(!showWrongList)}
                                className="bg-white hover:bg-gray-50 text-gray-700 font-medium py-3 rounded-lg shadow transition-all flex items-center justify-center gap-2"
                            >
                                âš ï¸ í‹€ë¦° ë¬¸ì œ ({wrongAnswers.length})
                            </button>
                            <button
                                onClick={handleReset}
                                className="bg-white hover:bg-gray-50 text-gray-700 font-medium py-3 rounded-lg shadow transition-all flex items-center justify-center gap-2"
                            >
                                ğŸ”„ ì „ì²´ ë¦¬ì…‹
                            </button>
                        </div>

                        {showWrongList && wrongAnswers.length > 0 && (
                            <div className="bg-white rounded-lg p-4 mb-4 shadow max-h-60 overflow-y-auto">
                                <h3 className="font-bold text-gray-800 mb-3">í‹€ë¦° ë¬¸ì œ ëª©ë¡</h3>
                                {wrongAnswers.map((q, idx) => (
                                    <div key={idx} className="text-sm py-2 border-b border-gray-100 last:border-0">
                                        <span className="text-gray-600">{q.category}</span> â€¢ {q.meridian} {q.pointTypeKorean} â†’ <span className="font-bold text-indigo-600">{q.answer}</span> <span className="text-gray-500 text-xs">({q.answerEn})</span>
                                    </div>
                                ))}
                            </div>
                        )}

                        <div className="mt-6 text-center text-sm text-gray-600">
                            <p className="mb-2">
                                ì˜¤ìˆ˜í˜ˆ + íŠ¹ì •í˜ˆ + ì˜¤í–‰í˜ˆ + ì‚¬ì´í˜ˆ + íŒ”ë§¥êµíšŒí˜ˆ + íŒ”íšŒí˜ˆ + ê¸°ê²½íŒ”ë§¥ ê·¹í˜ˆ
                            </p>
                            <p className="text-xs text-gray-500 mb-2">
                                ì´ {allQuestions.length}ê°œ ë¬¸ì œ | ìŒê²½: ëª©í™”í† ê¸ˆìˆ˜ / ì–‘ê²½: ê¸ˆìˆ˜ëª©í™”í† 
                            </p>
                            <p className="text-xs text-indigo-600">
                                ğŸ’¡ í‚¤ë³´ë“œ: Enter/Space=ë’¤ì§‘ê¸° | 1=ë§ìŒ | 2=í‹€ë¦¼ | â†/â†’=ì•ë’¤ì´ë™
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<AcupointFlashcards />, document.getElementById('root'));
    </script>
</body>
</html>
